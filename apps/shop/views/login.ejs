<%- include("partials/header", { title: "ログイン", currentUser }) %>

<div class="card stack">
  <div class="section-header">
    <div class="section-title">
      <span class="pill">Auth</span>
      <h2 style="margin: 0;">ログイン</h2>
    </div>
    <div class="muted">脆弱なSQLで検証される例です</div>
  </div>

  <% if (error) { %>
    <div class="alert"><%= error %></div>
  <% } %>

  <form class="stack" method="post" action="/login">
    <div class="form-field">
      <label>ユーザー名</label>
      <input name="username" autocomplete="username" required />
    </div>

    <div class="form-field">
      <label>パスワード</label>
      <div style="display: flex; gap: 8px; align-items: center;">
        <input
          id="password"
          name="password"
          type="password"
          autocomplete="current-password"
          required
          style="margin: 0; flex: 1;"
        />
        <button
          id="togglePassword"
          type="button"
          class="btn btn-ghost"
          style="white-space: nowrap;"
          aria-controls="password"
          aria-pressed="false"
        >
          表示
        </button>
      </div>
    </div>

    <button type="submit" class="btn btn-primary">ログイン</button>
  </form>
  <script>
    (() => {
      const pw = document.getElementById("password");
      const toggle = document.getElementById("togglePassword");
      if (!pw || !toggle) return;
      toggle.addEventListener("click", () => {
        const show = pw.type === "password";
        pw.type = show ? "text" : "password";
        toggle.textContent = show ? "非表示" : "表示";
        toggle.setAttribute("aria-pressed", String(show));
      });
    })();
  </script>

  <div class="muted">
    Seedアカウント例: <code>alice / password123</code>, <code>bob / password123</code>
  </div>
</div>

<%- include("partials/footer") %>
